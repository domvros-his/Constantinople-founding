<!doctype html>
<html lang="el">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Η ίδρυση της Κωνσταντινούπολης — Διαδραστικό αντικείμενο</title>
<style>
  :root {
    --bg:#f5f5dc; --burgundy:#800020; --frame:#d6d6d6;
    --text:#2b1b1b; --muted:rgba(43,27,27,.72);
    --border:rgba(0,0,0,.15); --shadow:0 10px 25px rgba(0,0,0,.12);
    --maxw:1100px;
  }
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;background:var(--bg);color:var(--text);}
  header{max-width:var(--maxw);margin:0 auto;padding:18px 16px 10px;text-align:center;}
  h1{margin:0 0 6px;color:var(--burgundy);font-size:clamp(22px,3.2vw,36px);letter-spacing:-.02em;}
  .sub{margin:0 auto;max-width:82ch;color:var(--muted);font-size:14px;line-height:1.45;}
  .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:12px;}
  .btn{border:2px solid var(--burgundy);background:white;color:var(--burgundy);padding:10px 12px;border-radius:999px;cursor:pointer;font-weight:800;font-size:13px;box-shadow:var(--shadow);text-decoration:none;user-select:none;}
  .btn:active{transform:translateY(1px)}
  .stage-wrap{max-width:var(--maxw);margin:8px auto 0;padding:0 16px 18px;}
  .frame{border:10px solid var(--frame);border-radius:22px;background:#bdbea7;box-shadow:var(--shadow);overflow:hidden;}
  .stage{position:relative;width:100%;aspect-ratio:16/9;}
  iframe{position:absolute;inset:0;width:100%;height:100%;border:0;background:#bdbea7;}
  .loading{
    position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
    background:rgba(245,245,220,.85);color:var(--burgundy);font-weight:900;
    letter-spacing:-.01em;
  }
  .footer{max-width:var(--maxw);margin:6px auto 22px;padding:0 16px;text-align:center;color:var(--muted);font-size:12px;}
  /* Modal */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:18px;z-index:50;}
  .modal.open{display:flex;}
  .modal-card{width:min(980px,100%);max-height:min(86vh,900px);overflow:auto;background:var(--bg);border:3px solid var(--burgundy);border-radius:18px;box-shadow:var(--shadow);}
  .modal-head{position:sticky;top:0;background:var(--bg);border-bottom:1px solid var(--border);padding:12px 14px;display:flex;gap:10px;align-items:center;justify-content:space-between;}
  .modal-title{font-weight:900;color:var(--burgundy);margin:0;font-size:16px;}
  .modal-body{padding:14px;}
  .logos{display:flex;gap:14px;flex-wrap:wrap;align-items:center;}
  .logos img{max-height:64px;border-radius:10px;border:1px solid var(--border);background:white;}
  .credits-text{white-space:pre-wrap;line-height:1.55;font-size:13px;}
  @media print{header,.actions,.footer,.modal{display:none!important;}.stage-wrap{padding:0;}.frame{border:0;box-shadow:none;}}
</style>
</head>
<body>
<div id="fileWarning" style="display:none;max-width:1100px;margin:12px auto 0;padding:12px 14px;border:2px solid rgba(128,0,32,.35);border-radius:16px;background:rgba(128,0,32,.08);color:#2b1b1b;font-weight:650;">

</div>

<header>
  <h1>Η ίδρυση της Κωνσταντινούπολης</h1>
  <p class="sub">                                                   </p>
  <div class="actions">
    <a class="btn" href="https://photodentro.edu.gr/v/item/ds/8521/9473" target="_blank" rel="noopener">Άνοιγμα στο Photodentro</a>
    <a class="btn" href="./app.html" target="_blank" rel="noopener">Άνοιγμα πλήρους (app.html)</a>
    <button class="btn" id="fsBtn">Πλήρης οθόνη</button>
    <button class="btn" id="printBtn">Εκτύπωση</button>
    <button class="btn" id="creditsBtn">Συντελεστές & άδεια</button>
  </div>
</header>

<div class="stage-wrap">
  <div class="frame" id="frame">
    <div class="stage">
      <div class="loading" id="loading">Φόρτωση…</div>
      <iframe id="player" src="./app.html" title="Η ίδρυση της Κωνσταντινούπολης" loading="eager"></iframe>
    </div>
  </div>
</div>

<div class="footer">✨✍️ Created by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved ✍️✨</div>

<div class="modal" id="creditsModal" role="dialog" aria-modal="true" aria-label="Συντελεστές και άδεια">
  <div class="modal-card">
    <div class="modal-head">
      <p class="modal-title">Συντελεστές & άδεια (από το πακέτο του αντικειμένου)</p>
      <button class="btn" id="closeCredits">Κλείσιμο</button>
    </div>
    <div class="modal-body">
      <div class="logos">
        <img src="./credits/images/cc.png" alt="Creative Commons">
        <img src="./credits/images/logos.jpg" alt="Λογότυπα">
      </div>
      <div class="credits-text" id="creditsText" style="margin-top:12px;">Φόρτωση συντελεστών…</div>
    </div>
  </div>
</div>

<script>
(function(){
  try{
    if (location.protocol === "file:") {
      var w = document.getElementById("fileWarning");
      if (w) w.style.display = "block";
    }
  }catch(e){}
})();
</script>

<script>
  const frame = document.getElementById('frame');
  const iframe = document.getElementById('player');
  const loading = document.getElementById('loading');

  iframe.addEventListener('load', () => {
    loading.style.display = 'none';
  });

  document.getElementById('fsBtn').addEventListener('click', async () => {
    if (!document.fullscreenElement) {
      try { await frame.requestFullscreen(); } catch (e) {}
    } else {
      try { await document.exitFullscreen(); } catch (e) {}
    }
  });

  document.getElementById('printBtn').addEventListener('click', () => {
    try {
      // same-origin on GitHub Pages → allowed
      iframe.contentWindow && iframe.contentWindow.print();
    } catch(e) {
      window.print();
    }
  });

  // Credits modal (loads ./credits/info.html into the modal)
  const modal = document.getElementById('creditsModal');
  const creditsText = document.getElementById('creditsText');
  document.getElementById('creditsBtn').addEventListener('click', async () => {
    modal.classList.add('open');
    try{
      const res = await fetch('./credits/info.html');
      const html = await res.text();
      // Extract readable text without executing anything
      const tmp = document.createElement('div');
      tmp.innerHTML = html;
      creditsText.textContent = (tmp.textContent || '').trim() || 'Δεν βρέθηκαν στοιχεία.';
    }catch(e){
      creditsText.textContent = 'Αποτυχία φόρτωσης ./credits/info.html. Βεβαιώσου ότι ο φάκελος credits/ έχει ανέβει σωστά.';
    }
  });
  document.getElementById('closeCredits').addEventListener('click', () => modal.classList.remove('open'));
  modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('open'); });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') modal.classList.remove('open'); });
</script>

</body>
</html>
